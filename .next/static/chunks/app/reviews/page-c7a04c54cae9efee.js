(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{1697:(e,t,r)=>{Promise.resolve().then(r.bind(r,9356))},4236:(e,t,r)=>{"use strict";r.d(t,{MovieCard:()=>o});var a=r(5155),s=r(4146),l=r.n(s),i=r(8173),n=r.n(i);function o(e){let{movie:t,index:r}=e,s=function(e){let t=e.split("/");return t[t.length-1]||""}(t.url);return(0,a.jsx)(n(),{href:"/reviews/".concat(s),className:"group block hover:opacity-95","aria-labelledby":"movie-title-".concat(t._id),scroll:!0,children:(0,a.jsxs)("article",{className:"space-y-4",itemScope:!0,itemType:"https://schema.org/Movie",children:[(0,a.jsx)("div",{className:"aspect-[3/2] overflow-hidden rounded-lg bg-muted",children:(0,a.jsx)(l(),{src:t.imagepreviewurl.replace("?w=600","?w=1200"),alt:"Movie still from ".concat(t.title," (").concat(t.year,")"),width:1200,height:800,className:"object-cover w-full h-full transition-all duration-300 group-hover:scale-105 group-hover:brightness-90",loading:r<6?"eager":"lazy",sizes:"(min-width: 1024px) 33vw, (min-width: 640px) 50vw, 100vw"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{id:"movie-title-".concat(t._id),className:"text-lg font-medium leading-snug tracking-tight group-hover:text-primary",itemProp:"name",children:t.title}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:t.director}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground/80",children:[t.rating>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-400",children:"★"}),(0,a.jsx)("span",{children:t.rating})]}),(0,a.jsx)("span",{className:"text-muted-foreground/60",children:"•"})]}),(0,a.jsxs)("span",{children:[t.duration," min"]}),(0,a.jsx)("span",{className:"text-muted-foreground/60",children:"•"}),(0,a.jsx)("span",{children:t.year})]})]})]})]})})}},9356:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2115),l=r(4236);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:i?24*Number(l)/Number(a):l,className:n("lucide",d),...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),c=((e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{className:l,...o}=r;return(0,s.createElement)(d,{ref:a,iconNode:t,className:n("lucide-".concat(i(e)),l),...o})});return r.displayName="".concat(e),r})("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),u=[{value:"added",label:"Added (newest first)"},{value:"title",label:"Title (alphabetical)"},{value:"year",label:"Year (newest first)"},{value:"length",label:"Length (longest first)"},{value:"rating",label:"Rating (highest first)"}];function m(e){let{movies:t,sortBy:r}=e,s=[...t].sort((e,t)=>{switch(r){case"title":return e.title.localeCompare(t.title);case"year":return parseInt(t.year)-parseInt(e.year);case"length":return parseInt(t.duration)-parseInt(e.duration);case"rating":return t.rating-e.rating;default:return new Date(t.updatedAd).getTime()-new Date(e.updatedAd).getTime()}});return(0,a.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:s.map((e,t)=>(0,a.jsx)(l.MovieCard,{movie:e,index:t},e._id))})}function h(){var e;let[t,r]=(0,s.useState)([]),[l,i]=(0,s.useState)("added"),[n,o]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!0),[g,f]=(0,s.useState)(null),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/movies");if(!e.ok)throw Error("Error fetching movies: ".concat(e.status));let t=await e.json();r(t),h(!1)}catch(e){f("Failed to load movies. Please try again later."),h(!1)}})()},[]),(0,s.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let v=e=>{i(e),o(!1)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-serif",children:"Film Reviews"}),(0,a.jsxs)("div",{className:"relative",ref:p,children:[(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-full bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/15 transition-all border border-transparent hover:border-slate-200 dark:hover:border-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-600",onClick:()=>o(!n),"aria-expanded":n,"aria-haspopup":"listbox","aria-controls":"sort-options",children:[(0,a.jsxs)("span",{children:["Sort: ",null===(e=u.find(e=>e.value===l))||void 0===e?void 0:e.label]}),(0,a.jsx)(c,{className:"h-4 w-4 transition-transform duration-200 ".concat(n?"rotate-180":"")})]}),n&&(0,a.jsx)("div",{id:"sort-options",role:"listbox",className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-10 overflow-hidden transform origin-top-right transition-all animate-in fade-in-50 zoom-in-95 duration-100",children:(0,a.jsx)("div",{className:"py-1",children:u.map(e=>(0,a.jsx)("button",{className:"w-full text-left px-4 py-2.5 text-sm transition-colors ".concat(l===e.value?"bg-slate-100 dark:bg-slate-800 font-medium text-primary":"hover:bg-slate-50 dark:hover:bg-slate-800"),onClick:()=>v(e.value),role:"option","aria-selected":l===e.value,children:e.label},e.value))})})]})]}),d?(0,a.jsx)("div",{className:"flex justify-center p-12",children:(0,a.jsx)("div",{className:"animate-pulse",children:"Loading reviews..."})}):g?(0,a.jsxs)("div",{className:"text-center p-8 text-red-500",children:[(0,a.jsx)("p",{children:g}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-md text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Try Again"})]}):(0,a.jsx)(m,{movies:t,sortBy:l})]})}},4146:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return n}});let a=r(306),s=r(666),l=r(7970),i=a._(r(5514));function n(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=l.Image}},e=>{var t=t=>e(e.s=t);e.O(0,[920,173,441,517,358],()=>t(1697)),_N_E=e.O()}]);