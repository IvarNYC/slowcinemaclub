(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{1697:(e,t,a)=>{Promise.resolve().then(a.bind(a,8878))},1683:(e,t,a)=>{"use strict";a.d(t,{MovieCard:()=>n});var r=a(5155),s=a(5565),l=a(8173),i=a.n(l);function n(e){let{movie:t,index:a}=e,l=function(e){let t=e.split("/");return t[t.length-1]||""}(t.url);return(0,r.jsx)(i(),{href:"/reviews/".concat(l),className:"group block hover:opacity-95","aria-labelledby":"movie-title-".concat(t._id),scroll:!0,children:(0,r.jsxs)("article",{className:"space-y-4",itemScope:!0,itemType:"https://schema.org/Movie",children:[(0,r.jsx)("div",{className:"aspect-[3/2] overflow-hidden rounded-lg bg-muted",children:(0,r.jsx)(s.default,{src:t.imagepreviewurl.replace("?w=600","?w=1200"),alt:"Movie still from ".concat(t.title," (").concat(t.year,")"),width:1200,height:800,className:"object-cover w-full h-full transition-all duration-300 group-hover:scale-105 group-hover:brightness-90",loading:a<6?"eager":"lazy",sizes:"(min-width: 1024px) 33vw, (min-width: 640px) 50vw, 100vw"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{id:"movie-title-".concat(t._id),className:"text-lg font-medium leading-snug tracking-tight group-hover:text-primary",itemProp:"name",children:t.title}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:t.director}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground/80",children:[t.rating>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-yellow-400",children:"★"}),(0,r.jsx)("span",{children:t.rating})]}),(0,r.jsx)("span",{className:"text-muted-foreground/60",children:"•"})]}),(0,r.jsxs)("span",{children:[t.duration," min"]}),(0,r.jsx)("span",{className:"text-muted-foreground/60",children:"•"}),(0,r.jsx)("span",{children:t.year})]})]})]})]})})}},8878:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(5155),s=a(2115),l=a(1683),i=a(8532),n=a(8094);let o=[{label:"Recently Added",value:"added"},{label:"Title (A-Z)",value:"title"},{label:"Year (New to Old)",value:"year"},{label:"Length (Short to Long)",value:"length"},{label:"Rating (High to Low)",value:"rating"}],d=e=>fetch(e,{cache:"no-store",headers:{pragma:"no-cache","cache-control":"no-cache"}}).then(e=>{if(!e.ok)throw Error("Failed to fetch movies");return e.json()});function c(e){let{movies:t,sortBy:a}=e,s=[...t].sort((e,t)=>{switch(a){case"title":return e.title.localeCompare(t.title);case"year":return parseInt(t.year)-parseInt(e.year);case"length":let r=e=>{if(!e.duration)return 0;let t=e.duration.match(/^(\d+)m$/);return t?parseInt(t[1]):0};return r(e)-r(t);case"rating":return t.rating-e.rating;default:return new Date(t.updatedAd||0).getTime()-new Date(e.updatedAd||0).getTime()}});return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((e,t)=>(0,r.jsx)(l.MovieCard,{movie:e,index:t},e._id))})}function u(){var e;let[t,a]=(0,s.useState)("added"),[l,u]=(0,s.useState)(!1),m=(0,s.useRef)(null),{data:h,error:g,isLoading:v}=(0,n.Ay)("/api/movies",d,{revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:3e4,dedupingInterval:5e3});(0,s.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let x=e=>{a(e),u(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-serif",children:"Film Reviews"}),(0,r.jsxs)("div",{className:"relative",ref:m,children:[(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-full bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/15 transition-all border border-transparent hover:border-slate-200 dark:hover:border-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-600",onClick:()=>u(!l),"aria-expanded":l,"aria-haspopup":"listbox","aria-controls":"sort-options",children:[(0,r.jsxs)("span",{children:["Sort: ",null===(e=o.find(e=>e.value===t))||void 0===e?void 0:e.label]}),(0,r.jsx)(i.A,{className:"h-4 w-4 transition-transform duration-200 ".concat(l?"rotate-180":"")})]}),l&&(0,r.jsx)("div",{id:"sort-options",role:"listbox",className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-10 overflow-hidden transform origin-top-right transition-all animate-in fade-in-50 zoom-in-95 duration-100",children:(0,r.jsx)("div",{className:"py-1",children:o.map(e=>(0,r.jsx)("button",{className:"w-full text-left px-4 py-2.5 text-sm transition-colors ".concat(t===e.value?"bg-slate-100 dark:bg-slate-800 font-medium text-primary":"hover:bg-slate-50 dark:hover:bg-slate-800"),onClick:()=>x(e.value),role:"option","aria-selected":t===e.value,children:e.label},e.value))})})]})]}),v?(0,r.jsx)("div",{className:"flex justify-center p-12",children:(0,r.jsx)("div",{className:"animate-pulse",children:"Loading reviews..."})}):g?(0,r.jsxs)("div",{className:"text-center p-8 text-red-500",children:[(0,r.jsx)("p",{children:g.message||"Failed to load movies. Please try again later."}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-md text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Try Again"})]}):h?(0,r.jsx)(c,{movies:h,sortBy:t}):null]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[920,173,91,441,517,358],()=>t(1697)),_N_E=e.O()}]);