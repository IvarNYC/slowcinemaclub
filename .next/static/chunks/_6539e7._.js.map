{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/lib/utils/url.ts"],"sourcesContent":["export function getSlugFromUrl(url: string): string {\n  // Extract the last part of the URL after the last forward slash\n  const parts = url.split('/');\n  const lastPart = parts[parts.length - 1];\n  return lastPart || '';\n}\n"],"names":[],"mappings":";;;AAAO,SAAS,eAAe,GAAW;IACxC,gEAAgE;IAChE,MAAM,QAAQ,IAAI,KAAK,CAAC;IACxB,MAAM,WAAW,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE;IACxC,OAAO,YAAY;AACrB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/MovieCard.tsx"],"sourcesContent":["'use client';\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { getSlugFromUrl } from '@/lib/utils/url';\n\nexport interface Movie {\n  _id: string;\n  title: string;\n  imagepreviewurl: string;\n  director: string;\n  year: string;\n  description: string;\n  rating: number;\n  updatedAd: string;\n  url: string;\n  language: string;\n  duration: string;\n}\n\nexport function MovieCard({ movie, index }: { movie: Movie; index: number }) {\n  const slug = getSlugFromUrl(movie.url);\n\n  return (\n    <Link \n      href={`/reviews/${slug}`}\n      className=\"group block hover:opacity-95\"\n      aria-labelledby={`movie-title-${movie._id}`}\n      scroll={true}\n    >\n      <article className=\"space-y-4\" itemScope itemType=\"https://schema.org/Movie\">\n        <div className=\"aspect-[3/2] overflow-hidden rounded-lg bg-muted\">\n          <Image\n            src={movie.imagepreviewurl.replace('?w=600', '?w=1200')}\n            alt={`Movie still from ${movie.title} (${movie.year})`}\n            width={1200}\n            height={800}\n            className=\"object-cover w-full h-full transition-all duration-300 group-hover:scale-105 group-hover:brightness-90\"\n            loading={index < 6 ? \"eager\" : \"lazy\"}\n            sizes=\"(min-width: 1024px) 33vw, (min-width: 640px) 50vw, 100vw\"\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <h2 \n            id={`movie-title-${movie._id}`}\n            className=\"text-lg font-medium leading-snug tracking-tight group-hover:text-primary\"\n            itemProp=\"name\"\n          >\n            {movie.title}\n          </h2>\n          <div className=\"flex flex-col gap-1\">\n            <p className=\"text-sm font-medium text-muted-foreground\">\n              {movie.director}\n            </p>\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground/80\">\n              {movie.rating > 0 && (\n                <>\n                  <span className=\"flex items-center gap-1\">\n                    <span className=\"text-yellow-400\">★</span>\n                    <span>{movie.rating}</span>\n                  </span>\n                  <span className=\"text-muted-foreground/60\">•</span>\n                </>\n              )}\n              <span>{movie.duration} min</span>\n              <span className=\"text-muted-foreground/60\">•</span>\n              <span>{movie.year}</span>\n            </div>\n          </div>\n        </div>\n      </article>\n    </Link>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAoBO,SAAS,UAAU,EAAE,KAAK,EAAE,KAAK,EAAmC;IACzE,MAAM,OAAO,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,GAAG;IAErC,qBACE,6LAAC,+JAAA,CAAA,UAAI;QACH,MAAM,CAAC,SAAS,EAAE,MAAM;QACxB,WAAU;QACV,mBAAiB,CAAC,YAAY,EAAE,MAAM,GAAG,EAAE;QAC3C,QAAQ;kBAER,cAAA,6LAAC;YAAQ,WAAU;YAAY,SAAS;YAAC,UAAS;;8BAChD,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,gIAAA,CAAA,UAAK;wBACJ,KAAK,MAAM,eAAe,CAAC,OAAO,CAAC,UAAU;wBAC7C,KAAK,CAAC,iBAAiB,EAAE,MAAM,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC;wBACtD,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,SAAS,QAAQ,IAAI,UAAU;wBAC/B,OAAM;;;;;;;;;;;8BAGV,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,IAAI,CAAC,YAAY,EAAE,MAAM,GAAG,EAAE;4BAC9B,WAAU;4BACV,UAAS;sCAER,MAAM,KAAK;;;;;;sCAEd,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CACV,MAAM,QAAQ;;;;;;8CAEjB,6LAAC;oCAAI,WAAU;;wCACZ,MAAM,MAAM,GAAG,mBACd;;8DACE,6LAAC;oDAAK,WAAU;;sEACd,6LAAC;4DAAK,WAAU;sEAAkB;;;;;;sEAClC,6LAAC;sEAAM,MAAM,MAAM;;;;;;;;;;;;8DAErB,6LAAC;oDAAK,WAAU;8DAA2B;;;;;;;;sDAG/C,6LAAC;;gDAAM,MAAM,QAAQ;gDAAC;;;;;;;sDACtB,6LAAC;4CAAK,WAAU;sDAA2B;;;;;;sDAC3C,6LAAC;sDAAM,MAAM,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/B;KArDgB"}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/reviews/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { MovieCard, Movie } from \"@/app/components/MovieCard\";\nimport { ChevronDown } from 'lucide-react';\nimport useSWR from 'swr';\n\ntype SortOption = 'added' | 'title' | 'year' | 'length' | 'rating';\n\nconst sortOptions = [\n  { label: 'Recently Added', value: 'added' },\n  { label: 'Title (A-Z)', value: 'title' },\n  { label: 'Year (New to Old)', value: 'year' },\n  { label: 'Length (Short to Long)', value: 'length' },\n  { label: 'Rating (High to Low)', value: 'rating' }\n];\n\n// Fetch movies with SWR\nconst fetcher = (url: string) => \n  fetch(url, {\n    // Add cache control headers for the browser\n    cache: 'no-store',\n    headers: {\n      'pragma': 'no-cache',\n      'cache-control': 'no-cache',\n    }\n  }).then(res => {\n    if (!res.ok) throw new Error('Failed to fetch movies');\n    return res.json();\n  });\n\nfunction MovieGrid({ movies, sortBy }: { movies: Movie[], sortBy: SortOption }) {\n  const sortedMovies = [...movies].sort((a, b) => {\n    switch (sortBy) {\n      case 'title':\n        return a.title.localeCompare(b.title);\n      case 'year':\n        return parseInt(b.year) - parseInt(a.year);\n      case 'length':\n        const getDuration = (movie: Movie) => {\n          if (!movie.duration) return 0;\n          const match = movie.duration.match(/^(\\d+)m$/);\n          return match ? parseInt(match[1]) : 0;\n        };\n        return getDuration(a) - getDuration(b);\n      case 'rating':\n        return b.rating - a.rating;\n      case 'added':\n      default:\n        // Assume updatedAd is a date string\n        return new Date(b.updatedAd || 0).getTime() - new Date(a.updatedAd || 0).getTime();\n    }\n  });\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n      {sortedMovies.map((movie, index) => (\n        <MovieCard key={movie._id} movie={movie} index={index} />\n      ))}\n    </div>\n  );\n}\n\nexport default function ReviewsPage() {\n  const [sortBy, setSortBy] = useState<SortOption>('added');\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  \n  // Use SWR for data fetching with revalidation\n  const { data: movies, error, isLoading } = useSWR<Movie[]>(\n    '/api/movies', \n    fetcher,\n    {\n      revalidateOnFocus: true,\n      revalidateOnReconnect: true,\n      refreshInterval: 30000, // Refresh every 30 seconds\n      dedupingInterval: 5000 // Only dedupe requests within 5 seconds\n    }\n  );\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const handleSortChange = (option: SortOption) => {\n    setSortBy(option);\n    setIsDropdownOpen(false);\n  };\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-4xl font-serif\">Film Reviews</h1>\n        \n        <div className=\"relative\" ref={dropdownRef}>\n          <button\n            className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-full bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/15 transition-all border border-transparent hover:border-slate-200 dark:hover:border-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-600\"\n            onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n            aria-expanded={isDropdownOpen}\n            aria-haspopup=\"listbox\"\n            aria-controls=\"sort-options\"\n          >\n            <span>Sort: {sortOptions.find(option => option.value === sortBy)?.label}</span>\n            <ChevronDown className={`h-4 w-4 transition-transform duration-200 ${isDropdownOpen ? 'rotate-180' : ''}`} />\n          </button>\n          \n          {isDropdownOpen && (\n            <div \n              id=\"sort-options\"\n              role=\"listbox\"\n              className=\"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-10 overflow-hidden transform origin-top-right transition-all animate-in fade-in-50 zoom-in-95 duration-100\"\n            >\n              <div className=\"py-1\">\n                {sortOptions.map((option) => (\n                  <button\n                    key={option.value}\n                    className={`w-full text-left px-4 py-2.5 text-sm transition-colors ${sortBy === option.value ? 'bg-slate-100 dark:bg-slate-800 font-medium text-primary' : 'hover:bg-slate-50 dark:hover:bg-slate-800'}`}\n                    onClick={() => handleSortChange(option.value as SortOption)}\n                    role=\"option\"\n                    aria-selected={sortBy === option.value}\n                  >\n                    {option.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {isLoading ? (\n        <div className=\"flex justify-center p-12\">\n          <div className=\"animate-pulse\">Loading reviews...</div>\n        </div>\n      ) : error ? (\n        <div className=\"text-center p-8 text-red-500\">\n          <p>{error.message || 'Failed to load movies. Please try again later.'}</p>\n          <button \n            onClick={() => window.location.reload()}\n            className=\"mt-4 px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-md text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      ) : movies ? (\n        <MovieGrid movies={movies} sortBy={sortBy} />\n      ) : null}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}