{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, MongoClientOptions } from 'mongodb';\n\nif (!process.env.MONGODB_URI) {\n  throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\n}\n\nconst uri = process.env.MONGODB_URI;\nconst options: MongoClientOptions = {\n  maxPoolSize: 10,\n  minPoolSize: 5,\n  maxIdleTimeMS: 60000,\n  connectTimeoutMS: 10000,\n  socketTimeoutMS: 45000,\n};\n\nlet client: MongoClient;\nlet clientPromise: Promise<MongoClient>;\n\nif (process.env.NODE_ENV === 'development') {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  const globalWithMongo = global as typeof globalThis & {\n    _mongoClientPromise?: Promise<MongoClient>;\n  };\n\n  if (!globalWithMongo._mongoClientPromise) {\n    client = new MongoClient(uri, options);\n    globalWithMongo._mongoClientPromise = client.connect();\n  }\n  clientPromise = globalWithMongo._mongoClientPromise;\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options);\n  clientPromise = client.connect();\n}\n\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\nexport default clientPromise;\n\n// Helper function to get a database instance\nexport async function getDb(dbName: string) {\n  const client = await clientPromise;\n  return client.db(dbName);\n}\n\n// Helper function to get a collection\nexport async function getCollection(dbName: string, collectionName: string) {\n  const db = await getDb(dbName);\n  return db.collection(collectionName);\n} "],"names":[],"mappings":";;;;;AAAA;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC5B,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,MAAM,UAA8B;IAClC,aAAa;IACb,aAAa;IACb,eAAe;IACf,kBAAkB;IAClB,iBAAiB;AACnB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,MAAM,kBAAkB;IAIxB,IAAI,CAAC,gBAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,uGAAA,CAAA,cAAW,CAAC,KAAK;QAC9B,gBAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,gBAAgB,mBAAmB;AACrD,OAAO;;AAIP;uCAIe;AAGR,eAAe,MAAM,MAAc;IACxC,MAAM,SAAS,MAAM;IACrB,OAAO,OAAO,EAAE,CAAC;AACnB;AAGO,eAAe,cAAc,MAAc,EAAE,cAAsB;IACxE,MAAM,KAAK,MAAM,MAAM;IACvB,OAAO,GAAG,UAAU,CAAC;AACvB"}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/MovieCard.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const MovieCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call MovieCard() from the server but MovieCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/MovieCard.tsx <module evaluation>\",\n    \"MovieCard\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,8DACA"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/MovieCard.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const MovieCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call MovieCard() from the server but MovieCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/MovieCard.tsx\",\n    \"MovieCard\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,0CACA"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/ClientSortOptions.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/ClientSortOptions.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ClientSortOptions.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/ClientSortOptions.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/ClientSortOptions.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ClientSortOptions.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/SortOptions.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/SortOptions.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/SortOptions.tsx <module evaluation>\",\n    \"default\",\n);\nexport const sortOptions = registerClientReference(\n    function() { throw new Error(\"Attempted to call sortOptions() from the server but sortOptions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/SortOptions.tsx <module evaluation>\",\n    \"sortOptions\",\n);\n"],"names":[],"mappings":";;;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA;AAEG,MAAM,cAAc,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,gEACA"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/components/SortOptions.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/SortOptions.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/SortOptions.tsx\",\n    \"default\",\n);\nexport const sortOptions = registerClientReference(\n    function() { throw new Error(\"Attempted to call sortOptions() from the server but sortOptions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/SortOptions.tsx\",\n    \"sortOptions\",\n);\n"],"names":[],"mappings":";;;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA;AAEG,MAAM,cAAc,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC7C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,4CACA"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/app/reviews/page.tsx"],"sourcesContent":["import { Suspense } from \"react\";\nimport { getCollection } from \"@/lib/mongodb\";\nimport { MovieCard, Movie } from \"@/app/components/MovieCard\";\nimport { Metadata } from 'next';\nimport { Document, Sort, SortDirection } from 'mongodb';\nimport ClientSortOptions from '@/app/components/ClientSortOptions';\nimport { sortOptions } from '@/app/components/SortOptions';\n\n// Enable ISR with 1 hour revalidation\nexport const revalidate = 3600;\n\n// Add metadata for the reviews page\nexport const metadata: Metadata = {\n  title: 'Film Reviews - Slow Cinema Club',\n  description: 'In-depth analysis and reviews of arthouse and experimental cinema. Discover thoughtful critiques of slow cinema, independent films, and avant-garde masterpieces.',\n  openGraph: {\n    title: 'Film Reviews - Slow Cinema Club',\n    description: 'In-depth analysis and reviews of arthouse and experimental cinema. Discover thoughtful critiques of slow cinema, independent films, and avant-garde masterpieces.',\n    type: 'website',\n  },\n};\n\ninterface ReviewsPageProps {\n  searchParams: { [key: string]: string | string[] | undefined };\n}\n\nasync function getAllMovies(sort = 'title'): Promise<Movie[]> {\n  try {\n    const collection = await getCollection('scc', 'movies');\n    \n    // Ensure sortOption exists with a valid fallback\n    let sortField = 'title';\n    let sortDirection: SortDirection = 1;\n    \n    // Find the sort option if it exists\n    if (sortOptions[sort]) {\n      const option = sortOptions[sort];\n      sortField = option.value;\n      sortDirection = option.direction === 'asc' ? 1 : -1;\n    }\n    \n    // MongoDB sort object\n    const sortObject: Record<string, SortDirection> = { [sortField]: sortDirection };\n    \n    const moviesRaw = await collection\n      .find(\n        {},\n        {\n          projection: {\n            _id: 1,\n            title: 1,\n            imagepreviewurl: 1,\n            director: 1,\n            year: 1,\n            description: 1,\n            rating: 1,\n            duration: 1,\n            updatedat: 1,\n            url: 1,\n            language: 1\n          },\n        }\n      )\n      .sort(sortObject)\n      .toArray();\n\n    // Serialize MongoDB documents to plain objects and ensure all required fields are present\n    const movies: Movie[] = moviesRaw.map((movie: Document) => ({\n      _id: movie._id.toString(),\n      title: movie.title as string,\n      imagepreviewurl: movie.imagepreviewurl as string,\n      director: movie.director as string,\n      year: movie.year as string,\n      description: movie.description as string,\n      rating: movie.rating as number,\n      duration: movie.duration as string,\n      updatedat: movie.updatedat as string,\n      url: movie.url as string,\n      language: (movie.language as string) || ''\n    }));\n\n    return movies;\n  } catch (error) {\n    console.error('Error fetching movies:', error);\n    return [];\n  }\n}\n\nfunction MovieGrid({ movies }: { movies: Movie[] }) {\n  return (\n    <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n      {movies.map((movie, index) => (\n        <MovieCard key={movie._id} movie={movie} index={index} />\n      ))}\n    </div>\n  );\n}\n\nexport default async function ReviewsPage({ searchParams }: ReviewsPageProps) {\n  // Get the sort parameter safely using a default value\n  const sortParam = searchParams?.sort || '';\n  const sortBy = Array.isArray(sortParam) ? sortParam[0] : sortParam;\n  \n  // Use a fallback if the sort parameter is invalid\n  const validSortBy = Object.keys(sortOptions).includes(sortBy) ? sortBy : 'title';\n  \n  const movies = await getAllMovies(validSortBy);\n\n  return (\n    <div>\n      <h1 className=\"text-4xl font-serif mb-8\">Film Reviews</h1>\n      <ClientSortOptions />\n      <Suspense fallback={<div>Loading reviews...</div>}>\n        <MovieGrid movies={movies} />\n      </Suspense>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AAGA;AACA;;;;;;;AAGO,MAAM,aAAa;AAGnB,MAAM,WAAqB;IAChC,OAAO;IACP,aAAa;IACb,WAAW;QACT,OAAO;QACP,aAAa;QACb,MAAM;IACR;AACF;AAMA,eAAe,aAAa,OAAO,OAAO;IACxC,IAAI;QACF,MAAM,aAAa,MAAM,CAAA,GAAA,8GAAA,CAAA,gBAAa,AAAD,EAAE,OAAO;QAE9C,iDAAiD;QACjD,IAAI,YAAY;QAChB,IAAI,gBAA+B;QAEnC,oCAAoC;QACpC,IAAI,iIAAA,CAAA,cAAW,CAAC,KAAK,EAAE;YACrB,MAAM,SAAS,iIAAA,CAAA,cAAW,CAAC,KAAK;YAChC,YAAY,OAAO,KAAK;YACxB,gBAAgB,OAAO,SAAS,KAAK,QAAQ,IAAI,CAAC;QACpD;QAEA,sBAAsB;QACtB,MAAM,aAA4C;YAAE,CAAC,UAAU,EAAE;QAAc;QAE/E,MAAM,YAAY,MAAM,WACrB,IAAI,CACH,CAAC,GACD;YACE,YAAY;gBACV,KAAK;gBACL,OAAO;gBACP,iBAAiB;gBACjB,UAAU;gBACV,MAAM;gBACN,aAAa;gBACb,QAAQ;gBACR,UAAU;gBACV,WAAW;gBACX,KAAK;gBACL,UAAU;YACZ;QACF,GAED,IAAI,CAAC,YACL,OAAO;QAEV,0FAA0F;QAC1F,MAAM,SAAkB,UAAU,GAAG,CAAC,CAAC,QAAoB,CAAC;gBAC1D,KAAK,MAAM,GAAG,CAAC,QAAQ;gBACvB,OAAO,MAAM,KAAK;gBAClB,iBAAiB,MAAM,eAAe;gBACtC,UAAU,MAAM,QAAQ;gBACxB,MAAM,MAAM,IAAI;gBAChB,aAAa,MAAM,WAAW;gBAC9B,QAAQ,MAAM,MAAM;gBACpB,UAAU,MAAM,QAAQ;gBACxB,WAAW,MAAM,SAAS;gBAC1B,KAAK,MAAM,GAAG;gBACd,UAAU,AAAC,MAAM,QAAQ,IAAe;YAC1C,CAAC;QAED,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,EAAE;IACX;AACF;AAEA,SAAS,UAAU,EAAE,MAAM,EAAuB;IAChD,qBACE,8OAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,8OAAC,+HAAA,CAAA,YAAS;gBAAiB,OAAO;gBAAO,OAAO;eAAhC,MAAM,GAAG;;;;;;;;;;AAIjC;AAEe,eAAe,YAAY,EAAE,YAAY,EAAoB;IAC1E,sDAAsD;IACtD,MAAM,YAAY,cAAc,QAAQ;IACxC,MAAM,SAAS,MAAM,OAAO,CAAC,aAAa,SAAS,CAAC,EAAE,GAAG;IAEzD,kDAAkD;IAClD,MAAM,cAAc,OAAO,IAAI,CAAC,iIAAA,CAAA,cAAW,EAAE,QAAQ,CAAC,UAAU,SAAS;IAEzE,MAAM,SAAS,MAAM,aAAa;IAElC,qBACE,8OAAC;;0BACC,8OAAC;gBAAG,WAAU;0BAA2B;;;;;;0BACzC,8OAAC,uIAAA,CAAA,UAAiB;;;;;0BAClB,8OAAC,qMAAA,CAAA,WAAQ;gBAAC,wBAAU,8OAAC;8BAAI;;;;;;0BACvB,cAAA,8OAAC;oBAAU,QAAQ;;;;;;;;;;;;;;;;;AAI3B"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivarnycolaas/Documents/webdev/slowcinemaclub/node_modules/next/dist/src/build/templates/app-page.ts"],"sourcesContent":["import type { LoaderTree } from '../../server/lib/app-dir-module'\nimport { AppPageRouteModule } from '../../server/route-modules/app-page/module.compiled' with { 'turbopack-transition': 'next-ssr' }\nimport { RouteKind } from '../../server/route-kind'\n\n// These are injected by the loader afterwards.\n\n/**\n * The tree created in next-app-loader that holds component segments and modules\n * and I've updated it.\n */\ndeclare const tree: LoaderTree\ndeclare const pages: any\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\n// INJECT:tree\n// INJECT:pages\n\nexport { tree, pages }\n\nexport { default as GlobalError } from 'VAR_MODULE_GLOBAL_ERROR'\n\n// These are injected by the loader afterwards.\ndeclare const __next_app_require__: any\ndeclare const __next_app_load_chunk__: any\n\n// INJECT:__next_app_require__\n// INJECT:__next_app_load_chunk__\n\nexport const __next_app__ = {\n  require: __next_app_require__,\n  loadChunk: __next_app_load_chunk__,\n}\n\nexport * from '../../server/app-render/entry-base'\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n  definition: {\n    kind: RouteKind.APP_PAGE,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n    appPaths: [],\n  },\n  userland: {\n    loaderTree: tree,\n  },\n})\n"],"names":["AppPageRouteModule","RouteKind","tree","pages","default","GlobalError","__next_app__","require","__next_app_require__","loadChunk","__next_app_load_chunk__","routeModule","definition","kind","APP_PAGE","page","pathname","bundlePath","filename","appPaths","userland","loaderTree"],"mappings":";;;;;;AA0BA,8BAA8B;AAzB9B,SAASA,kBAAkB,QAAQ,2DAA2D;IAAE,wBAAwB;AAAW,EAAC;AAYpI,yEAAyE;AAEzE,cAAc;AAGd,SAASE,IAAI,EAAEC,KAAK,GAAE;AAWtB,OAAO,MAAMG,eAAe;AAG5B,EAAC;;;;;;;;;;AAED,cAAc,qCAAoC,sBAAA;AAElD,UAAA,kDAA4D;AAC5D,MAAA,CAAO,MAAMK;IAAAA;IAAAA,SAAc,IAAIX,mBAAmB;YAChDY,QAAAA;YAAAA,GAAY;YAAA;wBACVC,IAAAA;oBAAAA,CAAMZ,UAAUa;oBAAAA,OAAQ;yBACxBC,MAAM;8BACNC,IAAAA,CAAAA,GAAU;wBAAA,QAAA;4BAAA,IAAA;4BAAA;yBAAA;;uBACV,2CAA2C;;iBAC3CC,YAAY;sBACZC,IAAAA,CAAAA;YAAAA,CAAU;SAAA;;SACVC,UAAU,EAAE;UACd,QAAA;YAAA,MAAA;gBACAC,OAAU,QAAA;wBAAA;4BACRC,KAAAA,CAAAA,GAAAA,IAAYnB,uKAAZmB,CAAAA,sBAAYnB,EAAAA,MAAAA,MAAAA,MAAAA,EAAAA,iBAAAA,CAAAA,CAAAA,EAAAA,mSAAAA,CAAAA,UAAAA,CAAAA,GAAAA,CAAAA,KAAAA,CAAAA,KAAAA,MAAAA,CAAAA,CAAAA,EAAAA,CAAAA,EAAAA,EAAAA;4BACd,OAAA,GAAA,mSAAA,CAAA,UAAA,CAAA,KAAA,CAAA,CAAA,EAAA,mSAAA,CAAA,UAAA,CAAA,MAAA,EAAA;4BACA,MAAA,CAAA,YAAA,CAAA","ignoreList":[0]}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}